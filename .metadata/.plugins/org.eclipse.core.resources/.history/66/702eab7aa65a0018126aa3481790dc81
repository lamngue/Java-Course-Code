package edu.gac.mcs178.gack.domain;

import java.util.ArrayList;
import java.util.List;
import edu.gac.mcs178.gack.*;
import edu.gac.mcs178.gack.Utility;
import edu.gac.mcs178.gack.GackWorld;

public class ScrollOfTeleportation extends MagicScroll{
	
	private String title = this.getName();
	private int times;
	public ScrollOfTeleportation(String title, int charges) {
		// TODO Auto-generated constructor stub
		super(title,charges);
		this.times = 0;
	}
	
	public String setName() {
		this.title = "TELEPORT SCROLL";
		return this.title;
	}
	
	public void beRead() {
		Person owner = getOwner();
		if (owner == null) {
			Utility.displayMessage("No one has " + getName());
		} else {
			owner.say("I have read " + getName());
			times ++;
			if(times == 1) {
				title = "TELEPORT SCROLL";
				Utility.displayMessage("Title has been revealed. It is " + title);
				setName();
			}
			if(times == super.getCharges()) {
				Utility.displayMessage("Charged. Invoked");
				this.doMagic();
			}
		}
	}
	
	
	public void doMagic() {
		// teleport to a new random place 
		List<Place> neighbors = new GackWorld().getWorld();
		if (!neighbors.isEmpty()) {
			Place newPlace = neighbors.get(Utility.randInt(neighbors.size()));
			Utility.displayMessage("TELEPORTED");
			getOwner().moveTo(newPlace);
		}
	}

}
